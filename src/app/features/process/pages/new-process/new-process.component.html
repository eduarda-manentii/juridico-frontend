<app-header></app-header>

<div class="container py-5" *ngIf="form">
  <h2 class="mb-4 text-secondary-custom">
    {{ processId ? 'Editar Processo' : 'Cadastro de Processo' }}
  </h2>

  <form [formGroup]="form">
    <div class="row g-3 mb-3">
      <div class="col-md-4">
        <label class="form-label" [appRequiredMarker]="true">Data de Abertura</label>
        <input class="form-control" type="date" formControlName="dataAbertura" />
      </div>
      <div class="col-md-4">
        <label class="form-label" [appRequiredMarker]="true">Status</label>
        <select class="form-select" formControlName="status">
          <option value="">Selecione</option>
          <option value="ATIVO">ATIVO</option>
          <option value="ENCERRADO">ENCERRADO</option>
          <option value="ARQUIVADO">ARQUIVADO</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label" [appRequiredMarker]="true">Descrição do Caso</label>
        <input class="form-control" type="text" formControlName="descricaoCaso" />
      </div>
    </div>

<div class="row g-3 mb-3">
  <div class="col-md-6">
    <label class="form-label" [appRequiredMarker]="true">Andamento Processual</label>
    <select class="form-select" formControlName="andamentoProcessualId">
      <option value="">Selecione</option>
      <option *ngFor="let andamento of andamentosDisponiveis" [value]="andamento.id">
        {{ andamento.tipoAndamentoProcessual }} - {{ andamento.descricao }} ({{ andamento.dataRegistro | date: 'dd/MM/yyyy' }})
      </option>
    </select>
  </div>

  <div class="col-md-6">
    <label class="form-label" [appRequiredMarker]="true">Parte Envolvida</label>
    <select class="form-select" formControlName="parteEnvolvidaId">
      <option value="">Selecione</option>
      <option *ngFor="let parte of partesDisponiveis" [value]="parte.id">
        {{ parte.nomeCompleto }} ({{ parte.tipoParteEnvolvida }}) - {{ parte.documento.tipoDocumento}}: {{ parte.documento.valor }}
      </option>
    </select>
  </div>
</div>

    <div class="d-flex gap-3 mt-4">
      <button
        type="button"
        class="btn px-4 py-2"
        style="background-color: #2b0033; color: white;"
        (click)="onSubmit()"
      >
        Salvar
      </button>

      <button
        type="button"
        class="btn px-4 py-2"
        style="background-color: transparent; color: #2b0033; border: 2px solid #2b0033;"
        (click)="goBack()"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
